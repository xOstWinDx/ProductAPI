## Приложение на FastAPI

Это приложение на FastAPI позволяет пользователям регистрироваться, аутентифицироваться и авторизовываться. Пользователи могут добавлять продукты, выполнять поиск по продуктам с использованием фильтров и пагинации, а также, если у них есть права администратора, удалять и изменять существующие в базе данных продукты.

### Функциональные возможности

- **Регистрация пользователей**: Создание нового пользовательского аккаунта.
- **Аутентификация**: Вход в систему с использованием учетных данных.
- **Авторизация**: Обеспечение наличия у пользователей соответствующих прав доступа.
- **Управление продуктами**: Добавление, удаление и изменение продуктов в базе данных.
- **Поиск продуктов**: Поиск продуктов с использованием различных фильтров и пагинации.

---

- *Для получения прав администратора теперь не нужно изменять базу данных вручную. При выполнении миграций по умолчанию создается суперпользователь.*

### Начало работы

Вы можете запустить это приложение локально или с использованием Docker. Следуйте приведенным ниже инструкциям для начала работы.

---

### Запуск локально

1. **Копирование и настройка переменных окружения**:
   - Скопируйте файл окружения-примера `.env-example` в `.env`:
     ```bash
     cp .env-example .env
     ```
   - Замените переменные в файле `.env` на ваши собственные данные. В том числе задайте данные для суперпользователя:
     ```env
     # Создаётся миграциями по умолчанию
     SUPERUSER_EMAIL=superuser@example.com
     SUPERUSER_NAME=SuperUser
     SUPERUSER_PASSWORD=supersecurepassword
     ```

2. **Установка зависимостей**:
   - Установите зависимости проекта с флагом для разработки:
     ```bash
     poetry install --with dev
     ```

3. **Запуск миграций Alembic**:
   - Примените миграции базы данных с использованием Alembic. При выполнении миграций будет создан суперпользователь с данными, указанными в `.env` файле:
     ```bash
     alembic upgrade head
     ```

4. **Запуск приложения**:
   - Запустите приложение FastAPI с использованием Uvicorn:
     ```bash
     uvicorn src.main:app --host 0.0.0.0 --port 8000
     ```

5. **Документация**:
   - После запуска приложения, документация будет доступна по стандартному адресу FastAPI:
     - Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
     - ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

---

### Запуск с использованием Docker

1. **Копирование и настройка переменных окружения**:
   - Скопируйте файл окружения-примера `.env-example` в `.env-non-dev`:
     ```bash
     cp .env-example .env-non-dev
     ```
   - Замените переменные в файле `.env-non-dev` на ваши собственные данные. В том числе задайте данные для суперпользователя:
     ```env
     # Создаётся миграциями по умолчанию
     SUPERUSER_EMAIL=superuser@example.com
     SUPERUSER_NAME=SuperUser
     SUPERUSER_PASSWORD=supersecurepassword
     ```

2. **Запуск приложения с использованием Docker**:
   - Соберите и запустите Docker-контейнеры:
     ```bash
     docker-compose up --build -d
     ```

3. **Документация**:
   - После запуска приложения, документация будет доступна по стандартному адресу FastAPI:
     - Swagger UI: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
     - ReDoc: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

---

Вот более полная и улучшенная версия вашего описания:

---

### Дополнительная информация

Приложение разработано с использованием архитектуры DDD (Domain-Driven Design), что делает его хорошо структурированным и модульным. Оно спроектировано как крупный монолитный сервис, способный обслуживать различные пользовательские интерфейсы и взаимодействия. Например:

- **HTTP API**: Основной интерфейс для взаимодействия с приложением через RESTful API.
- **Telegram-бот**: Интерактивный бот, который позволяет пользователям взаимодействовать с системой через популярное приложение для обмена сообщениями.
- **Web-приложение**: Веб-интерфейс, который может быть использован для управления и просмотра данных с помощью браузера.
- **CLI (Command Line Interface)**: Интерфейс командной строки для администрирования и выполнения различных задач.
- **Мобильное приложение**: Возможность интеграции с мобильными устройствами через специализированное приложение.

Архитектура приложения обеспечивает гибкость, позволяя легко добавлять новые интерфейсы или расширять существующие. Это делает его подходящим для масштабирования и адаптации к новым требованиям бизнеса.

> Если бы приложение планировалось как небольшой или средний микросервис, могло бы быть использовано другое проектное решение, основанное на future-based архитектуре. Например, такая структура описана в [FastAPI Best Practices](https://github.com/zhanymkanov/fastapi-best-practices?tab=readme-ov-file#project-structure).
---
Кроме того, по умолчанию, при выполнении миграций базы данных создается суперпользователь с правами администратора. Вы можете использовать его для доступа к административным функциям сразу после запуска приложения. Данные для суперпользователя настраиваются через переменные окружения в файле `.env`:

```plaintext
SUPERUSER_EMAIL=superuser@example.com
SUPERUSER_NAME=SuperUser
SUPERUSER_PASSWORD=supersecurepassword
```

Это позволяет вам войти под учетной записью суперпользователя без необходимости ручного изменения данных в базе данных.

---
